{"version":3,"file":"my-detailview.component.js","sourceRoot":"","sources":["my-detailview.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, OnInit, Inject, Injector} from 'angular2/core';\nimport {Event, FullEvent} from '../IEvent';\nimport {AngularFire, FirebaseListObservable, FirebaseObjectObservable, FirebaseRef} from 'angularfire2';\nimport {MyCommentComponent} from '../my-comment';\nimport {RouteData, Router, RouteParams, OnActivate, ComponentInstruction, CanActivate} from 'angular2/router';\nimport {Http} from 'angular2/http';\nimport {RouteConfig, ROUTER_DIRECTIVES, ROUTER_PROVIDERS} from 'angular2/router';\nimport { DateHandlerService } from '../date-handler.service'\n\n@Component({\n  moduleId: __moduleName,\n  selector: 'my-detailview',\n  templateUrl: 'my-detailview.component.html',\n  styleUrls: ['my-detailview.component.css'],\n  providers: [DateHandlerService],\n  directives: [MyCommentComponent],\n  inputs: ['comments']\n})\n//@CanActivate(() => tokenNotExpired())\nexport class MyDetailviewComponent implements OnInit {\n//Auto-gen = MyDetailviewComponent - kolla om det gör något.\n\n  constructor(private dateHandlerService: DateHandlerService, @Inject(FirebaseRef) public ref:Firebase, public data: RouteData, public injector: Injector, public params: RouteParams, private router: Router, public af: AngularFire) {\n  }\n  event: FullEvent = {name: \"\",\n                      date: \"\",\n                      start_time: \"\",\n                      stop_time: \"\",\n                      info: \"\",\n                      adress: \"\",\n                      comments: [null],\n                      price: \"\",\n                      organiser: \"\",\n                      phone: \"\",\n                      email: \"\",\n                      uid: null,\n                      imageURL: \"\"}\n\n  //public name = \"Placeholder, change to data from db\"\n  eventId = \"\"\n  newEvent = false\n  ngOnInit() {\n    this.getEvents();\n    // Get uid from sender\n    this.params = this.injector.parent.get(RouteParams);\n    this.eventId = this.params.get('uid');\n\n    if (this.eventId===\"\") {\n      console.log(\"empty \" + this.eventId);\n      this.newEvent = true;\n    }else {\n      console.log(\"set \" + this.eventId);\n      this.ref.child('/events').child('/'+this.eventId).on(\"value\", (v) => this.event = v.val());\n    }\n\n  }\n\n  getEvents() {\n\n  }\n\n\n  save(eid){\n    var x : FullEvent = this.event\n    if (!this.checkValue()) {\n      alert(\"Fyll i alla fält!\")\n      return false\n    }\n    this.checkPicture();\n\n    // If the user is creating a new event.\n    if (this.newEvent) {\n      \n      var timeStamp = this.dateHandlerService.getTimeStamp();\n      x.uid = this.ref.getAuth().uid + '-' + timeStamp;\n      var newRef = this.ref.child('/events/' + x.uid).update(x);\n      this.router.navigate(['/UserEvents']);\n      return false;\n\n    }else {\n      this.ref.child('/events').child(this.eventId).update(x);\n      this.router.navigate(['/My-show-detailsview', { uid: x.uid }]);\n      return false;\n    }\n    //console.log(this.event);\n\n  }\n\n  checkValue() {\n    console.log(\"inside checkValue\")\n    var newEvent = {name: this.event.name,\n                    date: this.event.date,\n                    start_time: this.event.start_time,\n                    stop_time: this.event.stop_time,\n                    info: this.event.info,\n                    adress: this.event.adress,\n                    comments: [null],\n                    price: this.event.price,\n                    organiser: this.event.organiser,\n                    phone: this.event.phone,\n                    email: this.event.email}\n    for (var i in newEvent) {\n      if(newEvent[i] === \"\" || newEvent[i] === undefined) {\n        return false\n      }\n    }\n    return true\n  }\n\n  checkPicture() {\n    if (this.event.imageURL === \"\" || this.event.imageURL === undefined) {\n      this.event.imageURL = \"http://cdn.almoststill.com/wp-content/uploads/2014/11/img-placeholder-dark.jpg\";\n    }\n  }\n\n  delete() {\n    var x;\n    if (confirm(\"Är du säker?\") == true) {\n        x = \"Evenemanget raderades!\";\n        this.ref.child('/events/').child(this.eventId).remove();\n        this.router.navigate(['/Home']);\n    } else {\n        x = \"Avbröts\";\n    }\n    return false;\n  }\n\n  cancel() {\n    var x : FullEvent = this.event\n    if (!x.uid) {\n      this.router.navigate(['/UserEvents']);\n    }else {\n      this.router.navigate(['/My-show-detailsview', {uid: x.uid}]);\n    }\n    \n    return false;\n  }\n\n  addComment() {\n    //Save comment to Event\n    //this.ref.child('/events').child(eventId).child('comments')\n  }\n\n}"]}